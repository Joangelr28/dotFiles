# --- CONFIGURACIÓN GLOBAL ---
yabai -m config layout bsp
yabai -m config focus_follows_mouse autofocus
# Forzar actualización de SketchyBar al arrancar
sketchybar --trigger space_change

# --- ETIQUETAS DE SPACES (Alias para SketchyBar) ---

# Función para etiquetar (asegura que el space exista antes de etiquetar)
yabai -m space 1  --label "terminal"
yabai -m space 2  --label "code"
yabai -m space 3  --label "browser"
yabai -m space 4  --label "social"
yabai -m space 5  --label "work-chats"
yabai -m space 6  --label "items"
yabai -m space 9  --label "docs"
yabai -m space 10 --label "default"

# --- GAPS (10px como en tu AeroSpace) ---
yabai -m config top_padding    10
yabai -m config bottom_padding 10
yabai -m config left_padding   10
yabai -m config right_padding  10
yabai -m config window_gap     10

# --- REGLAS DE APLICACIONES ---
# IMPORTANTE: Las reglas solo aplican a ventanas NUEVAS al abrirlas.
# Ventanas ya abiertas no se mueven. Cierra apps (Cmd+Q) y ábrelas de nuevo tras reiniciar yabai.

# Space 10: default (Tecla 0) | 1: terminal | 2: code | 3: browser | 4: social | 5: work-chats | 6: work-items | 9: documents

# ESPECÍFICAS PRIMERO (first-match wins)

# TERMINAL (Space 1)
yabai -m rule --add app="^Warp$" space=1
yabai -m rule --add app="^Simulator$" space=1

# CODE (Space 2 - Floating)
yabai -m rule --add app="^WebStorm$" space=2 manage=off
yabai -m rule --add app="^Rider$" space=2 manage=off
yabai -m rule --add app="^IntelliJ IDEA$" space=2 manage=off
yabai -m rule --add app="^RubyMine$" space=2 manage=off
yabai -m rule --add app="^Android Studio$" space=2 manage=off
yabai -m rule --add app="^Cursor$" space=2 manage=off

# BROWSER (Space 3 - Floating)
yabai -m rule --add app="^Arc$" space=3 manage=off

# SOCIAL CHATS (Space 4 - Tiling)
yabai -m rule --add app="^Telegram$" space=4 manage=on
yabai -m rule --add app="^WhatsApp$" space=4 manage=on

# WORK CHATS (Space 5 - Tiling)
yabai -m rule --add app="^Slack$" space=5 manage=on
yabai -m rule --add app="^Teams$" space=5 manage=on

# WORK ITEMS (Space 6)
yabai -m rule --add app="^Postman$" space=6
yabai -m rule --add app="^GitKraken$" space=6
yabai -m rule --add app="^DataGrip$" space=6

# DOCUMENTS (Space 9)
yabai -m rule --add app="^Finder$" space=9

# DEFAULT (Space 10 - Floating) - DEBE IR AL FINAL: apps no definidas van aquí
yabai -m rule --add app=".*" space=10 manage=off
